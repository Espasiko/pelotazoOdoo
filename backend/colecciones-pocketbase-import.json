[
  {
    "name": "productos",
    "type": "base",
    "fields": [
      {"name": "codigo", "type": "text", "required": true, "unique": true},
      {"name": "nombre", "type": "text", "required": true},
      {"name": "descripcion", "type": "text"},
      {"name": "precio_venta", "type": "number", "required": true},
      {"name": "precio_compra", "type": "number"},
      {"name": "iva", "type": "number", "required": true},
      {"name": "stock_actual", "type": "number"},
      {"name": "stock_minimo", "type": "number"},
      {"name": "activo", "type": "bool", "required": true, "options": {"default": true}},
      {"name": "visible_online", "type": "bool"},
      {"name": "proveedor", "type": "relation", "required": false, "options": {"collectionId": "proveedores"}},
      {"name": "categoria", "type": "relation", "required": false, "options": {"collectionId": "categorias"}},
      {"name": "codigo_barras", "type": "text"},
      {"name": "codigo_barras_tipo", "type": "text"},
      {"name": "notas", "type": "text"},
      {"name": "fecha_alta", "type": "date"},
      {"name": "imagen", "type": "file"},
      {"name": "reservable", "type": "bool"},
      {"name": "porcentaje_deposito", "type": "number"},
      {"name": "descripcion_online", "type": "text"},
      {"name": "alerta_stock_bajo", "type": "bool"},
      {"name": "ultima_alerta", "type": "date"}
    ]
  },
  {
    "name": "categorias",
    "type": "base",
    "fields": [
      {"name": "nombre", "type": "text", "required": true, "unique": true},
      {"name": "descripcion", "type": "text"},
      {"name": "activo", "type": "bool"},
      {"name": "fecha_alta", "type": "date"},
      {"name": "visible_online", "type": "bool"},
      {"name": "orden", "type": "number"}
    ]
  },
  {
    "name": "proveedores",
    "type": "base",
    "fields": [
      {"name": "nombre", "type": "text", "required": true, "unique": true},
      {"name": "contacto", "type": "text"},
      {"name": "telefono", "type": "text"},
      {"name": "email", "type": "email"},
      {"name": "nif", "type": "text"},
      {"name": "direccion", "type": "text"},
      {"name": "activo", "type": "bool"},
      {"name": "fecha_alta", "type": "date"},
      {"name": "notas", "type": "text"}
    ]
  },
  {
    "name": "clientes",
    "type": "base",
    "fields": [
      {"name": "nombre", "type": "text", "required": true},
      {"name": "nif", "type": "text"},
      {"name": "direccion", "type": "text"},
      {"name": "telefono", "type": "text"},
      {"name": "email", "type": "email"},
      {"name": "tipo_cliente", "type": "text"},
      {"name": "notas", "type": "text"}
    ]
  },
  {
    "name": "facturas",
    "type": "base",
    "fields": [
      {"name": "numero_factura", "type": "text", "required": true, "unique": true},
      {"name": "fecha_emision", "type": "date", "required": true},
      {"name": "cliente", "type": "relation", "required": true, "options": {"collectionId": "clientes"}},
      {"name": "total", "type": "number", "required": true},
      {"name": "iva_total", "type": "number"},
      {"name": "tipo_factura", "type": "text"},
      {"name": "referencia_anterior", "type": "text"},
      {"name": "estado_verifactu", "type": "text"},
      {"name": "xml_verifactu", "type": "file"},
      {"name": "respuesta_aeat", "type": "text"},
      {"name": "uuid_verifactu", "type": "text"},
      {"name": "firma_digital", "type": "file"},
      {"name": "pdf_original", "type": "file"},
      {"name": "origen_importacion", "type": "relation", "options": {"collectionId": "importaciones"}}
    ]
  },
  {
    "name": "lineas_factura",
    "type": "base",
    "fields": [
      {"name": "factura", "type": "relation", "required": true, "options": {"collectionId": "facturas"}},
      {"name": "producto", "type": "relation", "options": {"collectionId": "productos"}},
      {"name": "descripcion", "type": "text", "required": true},
      {"name": "cantidad", "type": "number", "required": true},
      {"name": "precio_unitario", "type": "number", "required": true},
      {"name": "iva", "type": "number", "required": true},
      {"name": "total_linea", "type": "number", "required": true},
      {"name": "tipo_iva", "type": "text"}
    ]
  },
  {
    "name": "eventos_facturacion",
    "type": "base",
    "fields": [
      {"name": "factura", "type": "relation", "options": {"collectionId": "facturas"}},
      {"name": "tipo_evento", "type": "text"},
      {"name": "fecha_evento", "type": "date"},
      {"name": "referencia_anterior", "type": "text"},
      {"name": "xml_enviado", "type": "file"},
      {"name": "respuesta_aeat", "type": "text"},
      {"name": "estado", "type": "text"}
    ]
  },
  {
    "name": "importaciones",
    "type": "base",
    "fields": [
      {"name": "tipo", "type": "text", "required": true},
      {"name": "fecha", "type": "date", "required": true},
      {"name": "archivo", "type": "file", "required": true},
      {"name": "total_registros", "type": "number"},
      {"name": "registros_exitosos", "type": "number"},
      {"name": "registros_fallidos", "type": "number"},
      {"name": "notas", "type": "text"}
    ]
  },
  {
    "name": "gastos",
    "type": "base",
    "fields": [
      {"name": "fecha", "type": "date", "required": true},
      {"name": "concepto", "type": "text", "required": true},
      {"name": "importe", "type": "number", "required": true},
      {"name": "categoria", "type": "text"},
      {"name": "proveedor", "type": "relation", "options": {"collectionId": "proveedores"}},
      {"name": "notas", "type": "text"}
    ]
  },
  {
    "name": "ingresos",
    "type": "base",
    "fields": [
      {"name": "fecha", "type": "date", "required": true},
      {"name": "concepto", "type": "text", "required": true},
      {"name": "importe", "type": "number", "required": true},
      {"name": "categoria", "type": "text"},
      {"name": "notas", "type": "text"}
    ]
  }
]
